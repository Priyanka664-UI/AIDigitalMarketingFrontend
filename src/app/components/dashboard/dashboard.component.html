<div class="dashboard">
  <header class="header">
    <h1>ğŸ§  MarketMindAI</h1>
    <nav class="top-nav">
      <button class="nav-btn" [class.active]="activeTab === 'dashboard'" (click)="activeTab = 'dashboard'">
        <span class="icon">ğŸ“Š</span>
        <span>Dashboard</span>
      </button>
      <button class="nav-btn" [class.active]="activeTab === 'content'" (click)="activeTab = 'content'">
        <span class="icon">ğŸ“</span>
        <span>Content Manager</span>
      </button>
      <button class="nav-btn" [class.active]="activeTab === 'ai'" (click)="activeTab = 'ai'">
        <span class="icon">ğŸ¤–</span>
        <span>AI Engine</span>
      </button>
      <button class="nav-btn" [class.active]="activeTab === 'analytics'" (click)="activeTab = 'analytics'">
        <span class="icon">ğŸ“ˆ</span>
        <span>Analytics & Reports</span>
      </button>
      <button class="nav-btn" [class.active]="activeTab === 'settings'" (click)="activeTab = 'settings'">
        <span class="icon">âš™ï¸</span>
        <span>Settings</span>
      </button>
    </nav>
    <button class="btn-logout" (click)="logout()">Logout</button>
  </header>

  <div class="content" *ngIf="activeTab === 'dashboard'">
    <main class="dashboard-main">
      <!-- Stats Overview -->
      <div class="stats-grid">
        <div class="stat-box">
          <div class="stat-icon">ğŸ“Š</div>
          <div class="stat-info">
            <div class="stat-value">{{ dashboardStats.totalPostsThisMonth }}</div>
            <div class="stat-label">Total Posts This Month</div>
          </div>
        </div>
        <div class="stat-box">
          <div class="stat-icon">ğŸ“</div>
          <div class="stat-info">
            <div class="stat-value">{{ dashboardStats.draftPosts }}</div>
            <div class="stat-label">Draft Posts</div>
          </div>
        </div>
        <div class="stat-box">
          <div class="stat-icon">ğŸ‘¥</div>
          <div class="stat-info">
            <div class="stat-value">{{ dashboardStats.followersGroup }}</div>
            <div class="stat-label">Followers Group</div>
          </div>
        </div>
        <div class="stat-box">
          <div class="stat-icon">ğŸ“ˆ</div>
          <div class="stat-info">
            <div class="stat-value">{{ dashboardStats.totalReach }}</div>
            <div class="stat-label">Total Reach</div>
          </div>
        </div>
        <div class="stat-box">
          <div class="stat-icon">â°</div>
          <div class="stat-info">
            <div class="stat-value">{{ dashboardStats.scheduledPosts }}</div>
            <div class="stat-label">Scheduled Posts</div>
          </div>
        </div>
      </div>

      <!-- Platform Status & Quick Actions -->
      <div class="dashboard-grid">
        <div class="platform-status">
          <h3>Platform Status</h3>
          <div class="platform-list">
            <div *ngFor="let platform of platformStatus" class="platform-item">
              <div class="platform-info">
                <span class="platform-icon">{{ platform.icon }}</span>
                <span class="platform-name">{{ platform.name }}</span>
              </div>
              <span class="status-badge" [class.connected]="platform.connected" [class.disconnected]="!platform.connected">
                {{ platform.connected ? 'Connected' : 'Not Connected' }}
              </span>
            </div>
          </div>
        </div>

        <div class="quick-actions">
          <h3>Quick Actions</h3>
          <button class="action-btn" (click)="generateNewContent()">
            <span class="action-icon">âœ¨</span>
            <span>Generate New Content</span>
          </button>
          <button class="action-btn" (click)="regenerateCaption()">
            <span class="action-icon">ğŸ”„</span>
            <span>Regenerate Caption</span>
          </button>
        </div>
      </div>
    </main>
  </div>

  <div class="content grid-layout" *ngIf="activeTab === 'content'">
    <aside class="sidebar">
      <div class="sidebar-header">
        <h3>Content Management</h3>
      </div>
      
      <div class="sub-nav">
        <button class="sub-nav-btn" [class.active]="contentSubTab === 'calendar'" (click)="contentSubTab = 'calendar'">
          ğŸ“… Content Calendar
        </button>
        <button class="sub-nav-btn" [class.active]="contentSubTab === 'library'" (click)="contentSubTab = 'library'">
          ğŸ“š Content Library
        </button>
        <button class="sub-nav-btn" [class.active]="contentSubTab === 'drafts'" (click)="contentSubTab = 'drafts'">
          ğŸ“ Draft Manager
        </button>
      </div>
    </aside>

    <main class="main-content">
      <!-- Content Calendar -->
      <div *ngIf="contentSubTab === 'calendar'">
        <h2>ğŸ“… Content Calendar</h2>
        <div class="view-toggle">
          <button class="toggle-btn" [class.active]="calendarView === 'monthly'" (click)="calendarView = 'monthly'">Monthly View</button>
          <button class="toggle-btn" [class.active]="calendarView === 'weekly'" (click)="calendarView = 'weekly'">Weekly View</button>
        </div>
        <div class="calendar-placeholder">
          <p>Calendar view with drag & drop rescheduling</p>
          <p>Status: Draft / Scheduled / Posted</p>
        </div>
      </div>

      <!-- Content Library -->
      <div *ngIf="contentSubTab === 'library'">
        <h2>ğŸ“š Content Library</h2>
        <div class="library-sections">
          <div class="library-card">ğŸ“„ Saved Posts</div>
          <div class="library-card">ğŸ¤– AI Generated Posts</div>
          <div class="library-card">ğŸ–¼ï¸ Uploaded Media</div>
          <div class="library-card">#ï¸âƒ£ Hashtag Collections</div>
        </div>
      </div>

      <!-- Draft Manager -->
      <div *ngIf="contentSubTab === 'drafts'">
        <h2>ğŸ“ Draft Manager</h2>
        <div class="draft-actions">
          <button class="action-btn">âœï¸ Edit Caption</button>
          <button class="action-btn">#ï¸âƒ£ Edit Hashtags</button>
          <button class="action-btn">ğŸ”„ Regenerate with AI</button>
          <button class="action-btn">ğŸ‘ï¸ Preview Post</button>
        </div>
      </div>
    </main>
  </div>

  <div class="content" *ngIf="activeTab === 'ai'">
    <div class="ai-sections">
      <div class="ai-card">
        <h3>ğŸ¤– AI Content Generator</h3>
        <div class="ai-options">
          <select class="ai-select" [(ngModel)]="aiContentConfig.days">
            <option [value]="7">Generate 7 Day Calendar</option>
            <option [value]="30">Generate 30 Day Calendar</option>
          </select>
          <select class="ai-select" [(ngModel)]="aiContentConfig.tone">
            <option>Professional</option>
            <option>Friendly</option>
            <option>Luxury</option>
            <option>Casual</option>
          </select>
          <select class="ai-select" [(ngModel)]="aiContentConfig.platform">
            <option>INSTAGRAM</option>
            <option>FACEBOOK</option>
            <option>LINKEDIN</option>
            <option>WHATSAPP</option>
          </select>
          <button class="action-btn" (click)="generateAIContent()">âœ¨ Generate Content</button>
        </div>
      </div>

      <div class="ai-card">
        <h3>ğŸ¨ AI Image Generator</h3>
        <div class="ai-options">
          <button class="option-btn" (click)="testBackend()">ğŸ” Test Backend Connection</button>
          <textarea 
            class="ai-input" 
            rows="3" 
            placeholder="Enter detailed image prompt (e.g., 'A modern coffee shop interior with warm lighting and cozy atmosphere')" 
            [(ngModel)]="imagePrompt"></textarea>
          <button class="action-btn" (click)="generateAIImage()" [disabled]="isGeneratingImage">
            {{ isGeneratingImage ? 'â³ Generating...' : 'âœ¨ Generate Image' }}
          </button>
          <div *ngIf="generatedImage" class="generated-image-container">
            <h4>Generated Image:</h4>
            <img [src]="generatedImage" [alt]="imagePrompt" class="generated-image" (error)="onImageError($event)" (load)="onImageLoad()">
            <p class="image-prompt">Prompt: "{{ imagePrompt }}"</p>
            <div class="image-actions">
              <button class="option-btn" (click)="downloadImage()">ğŸ’¾ Download Image</button>
              <button class="option-btn" (click)="saveToLibrary()">ğŸ“š Save to Library</button>
              <button class="option-btn" (click)="copyImageUrl()">ğŸ”— Copy URL</button>
            </div>
          </div>
        </div>
      </div>

      <div class="ai-card">
        <h3>ğŸ’¡ AI Insights</h3>
        <div class="insights-list" *ngIf="aiInsights">
          <div class="insight-item">ğŸ“Š Best Performing: {{ aiInsights.bestContentType }}</div>
          <div class="insight-item">â° Best Time: {{ aiInsights.bestPostingTime }}</div>
          <div class="insight-item">ğŸ’¡ Suggested: {{ aiInsights.suggestedCampaigns?.join(', ') }}</div>
          <div class="insight-item">ğŸ”¥ Trending: {{ aiInsights.trendingTopics?.join(' ') }}</div>
        </div>
        <button class="action-btn" (click)="loadAIInsights()">ğŸ”„ Refresh Insights</button>
      </div>
    </div>
  </div>

  <div class="content" *ngIf="activeTab === 'analytics'">
    <div class="analytics-sections">
      <div class="analytics-card">
        <h3>ğŸ“ˆ Engagement Analytics</h3>
        <div class="analytics-items">
          <div class="analytics-item">ğŸ“Š Reach Graph</div>
          <div class="analytics-item">â¤ï¸ Likes & Comments</div>
          <div class="analytics-item">ğŸ”— Click-Through Rate</div>
          <div class="analytics-item">ğŸ“ˆ Engagement Trend (Weekly)</div>
        </div>
      </div>

      <div class="analytics-card">
        <h3>âš–ï¸ Platform Comparison</h3>
        <div class="analytics-items">
          <div class="analytics-item">ğŸ“· Instagram vs Facebook</div>
          <div class="analytics-item">ğŸ“Š Content Type Performance</div>
          <div class="analytics-item">ğŸ‘¥ Audience Growth</div>
        </div>
      </div>

      <div class="analytics-card">
        <h3>ğŸ¯ Campaign Performance</h3>
        <div class="analytics-items">
          <div class="analytics-item">ğŸ“Š Active Campaign Metrics</div>
          <div class="analytics-item">ğŸ’° ROI Estimation</div>
          <div class="analytics-item">ğŸ¯ Conversion Rate</div>
        </div>
      </div>

      <div class="analytics-card">
        <h3>ğŸ“„ Reports</h3>
        <div class="report-actions">
          <button class="action-btn">ğŸ“¥ Download Monthly Report</button>
          <button class="action-btn">ğŸ“Š Export CSV</button>
          <button class="action-btn">ğŸ“¤ Share PDF</button>
        </div>
      </div>
    </div>
  </div>

  <div class="content" *ngIf="activeTab === 'settings'">
    <div class="tab-content">
      <h2>âš™ï¸ Settings</h2>
      <p>Configure your account and business settings</p>
    </div>
  </div>

  <div class="modal" *ngIf="showCreateCampaign" (click)="showCreateCampaign = false">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <h2>Create New Campaign</h2>
      <form (ngSubmit)="createCampaign()">
        <div class="form-group">
          <label>Campaign Name</label>
          <input type="text" [(ngModel)]="newCampaign.name" name="name" required>
        </div>
        <div class="form-group">
          <label>Start Date</label>
          <input type="date" [(ngModel)]="newCampaign.startDate" name="startDate" required>
        </div>
        <div class="form-group">
          <label>End Date</label>
          <input type="date" [(ngModel)]="newCampaign.endDate" name="endDate" required>
        </div>
        <div class="modal-actions">
          <button type="button" class="btn-secondary" (click)="showCreateCampaign = false">Cancel</button>
          <button type="submit" class="btn-primary">Create Campaign</button>
        </div>
      </form>
    </div>
  </div>
</div>
