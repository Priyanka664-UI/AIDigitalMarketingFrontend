<div class="dashboard">
  <header class="header">
    <h1>ğŸ§  MarketMindAI</h1>
    <nav class="top-nav">
      <button class="nav-btn" [class.active]="activeTab === 'dashboard'" (click)="activeTab = 'dashboard'">
        <span class="icon">ğŸ“Š</span>
        <span>Dashboard</span>
      </button>
      <button class="nav-btn" [class.active]="activeTab === 'content'" routerLink="/content-management">
        <span class="icon">ğŸ“</span>
        <span>Content Manager</span>
      </button>
      <button class="nav-btn" [class.active]="activeTab === 'ai'" (click)="activeTab = 'ai'">
        <span class="icon">ğŸ¤–</span>
        <span>AI Engine</span>
      </button>
      <button class="nav-btn" [class.active]="activeTab === 'analytics'" (click)="activeTab = 'analytics'">
        <span class="icon">ğŸ“ˆ</span>
        <span>Analytics & Reports</span>
      </button>
      <button class="nav-btn" [class.active]="activeTab === 'settings'" (click)="activeTab = 'settings'">
        <span class="icon">âš™ï¸</span>
        <span>Settings</span>
      </button>
    </nav>
    <button class="btn-logout" (click)="logout()">Logout</button>
  </header>

  <div class="content" *ngIf="activeTab === 'dashboard'">
    <main class="dashboard-main">
      <!-- Stats Overview -->
      <div class="stats-grid">
        <div class="stat-box">
          <div class="stat-icon">ğŸ“Š</div>
          <div class="stat-info">
            <div class="stat-value">{{ dashboardStats.totalPostsThisMonth }}</div>
            <div class="stat-label">Total Posts This Month</div>
          </div>
        </div>
        <div class="stat-box">
          <div class="stat-icon">ğŸ“</div>
          <div class="stat-info">
            <div class="stat-value">{{ dashboardStats.draftPosts }}</div>
            <div class="stat-label">Draft Posts</div>
          </div>
        </div>
        <div class="stat-box">
          <div class="stat-icon">ğŸ‘¥</div>
          <div class="stat-info">
            <div class="stat-value">{{ dashboardStats.followersGroup }}</div>
            <div class="stat-label">Followers Group</div>
          </div>
        </div>
        <div class="stat-box">
          <div class="stat-icon">ğŸ“ˆ</div>
          <div class="stat-info">
            <div class="stat-value">{{ dashboardStats.totalReach }}</div>
            <div class="stat-label">Total Reach</div>
          </div>
        </div>
        <div class="stat-box">
          <div class="stat-icon">â°</div>
          <div class="stat-info">
            <div class="stat-value">{{ dashboardStats.scheduledPosts }}</div>
            <div class="stat-label">Scheduled Posts</div>
          </div>
        </div>
      </div>

      <!-- Platform Status & Quick Actions -->
      <div class="dashboard-grid">
        <div class="platform-status">
          <h3>Platform Status</h3>
          <div class="platform-list">
            <div *ngFor="let platform of platformStatus" class="platform-item">
              <div class="platform-info">
                <span class="platform-icon">{{ platform.icon }}</span>
                <span class="platform-name">{{ platform.name }}</span>
              </div>
              <span class="status-badge" [class.connected]="platform.connected" [class.disconnected]="!platform.connected">
                {{ platform.connected ? 'Connected' : 'Not Connected' }}
              </span>
            </div>
          </div>
        </div>

        <div class="quick-actions">
          <h3>Quick Actions</h3>
          <button class="action-btn" (click)="generateNewContent()">
            <span class="action-icon">âœ¨</span>
            <span>Generate New Content</span>
          </button>
          <button class="action-btn" (click)="regenerateCaption()">
            <span class="action-icon">ğŸ”„</span>
            <span>Regenerate Caption</span>
          </button>
        </div>
      </div>
    </main>
  </div>

  <div class="content grid-layout" *ngIf="activeTab === 'content'">
    <aside class="sidebar">
      <div class="sidebar-header">
        <h3>Content Management</h3>
      </div>
      
      <div class="sub-nav">
        <button class="sub-nav-btn" [class.active]="contentSubTab === 'calendar'" (click)="contentSubTab = 'calendar'">
          ğŸ“… Content Calendar
        </button>
        <button class="sub-nav-btn" [class.active]="contentSubTab === 'library'" (click)="contentSubTab = 'library'">
          ğŸ“š Content Library
        </button>
        <button class="sub-nav-btn" [class.active]="contentSubTab === 'drafts'" (click)="contentSubTab = 'drafts'">
          ğŸ“ Draft Manager
        </button>
      </div>
    </aside>

    <main class="main-content">
      <!-- Content Calendar -->
      <div *ngIf="contentSubTab === 'calendar'">
        <h2>ğŸ“… Content Calendar</h2>
        <div class="view-toggle">
          <button class="toggle-btn" [class.active]="calendarView === 'monthly'" (click)="calendarView = 'monthly'">Monthly View</button>
          <button class="toggle-btn" [class.active]="calendarView === 'weekly'" (click)="calendarView = 'weekly'">Weekly View</button>
        </div>
        <div class="calendar-placeholder">
          <p>Calendar view with drag & drop rescheduling</p>
          <p>Status: Draft / Scheduled / Posted</p>
        </div>
      </div>

      <!-- Content Library -->
      <div *ngIf="contentSubTab === 'library'">
        <h2>ğŸ“š Content Library</h2>
        <div class="library-sections">
          <div class="library-card">ğŸ“„ Saved Posts</div>
          <div class="library-card">ğŸ¤– AI Generated Posts</div>
          <div class="library-card">ğŸ–¼ï¸ Uploaded Media</div>
          <div class="library-card">#ï¸âƒ£ Hashtag Collections</div>
        </div>
      </div>

      <!-- Draft Manager -->
      <div *ngIf="contentSubTab === 'drafts'">
        <h2>ğŸ“ Draft Manager</h2>
        <div class="draft-actions">
          <button class="action-btn">âœï¸ Edit Caption</button>
          <button class="action-btn">#ï¸âƒ£ Edit Hashtags</button>
          <button class="action-btn">ğŸ”„ Regenerate with AI</button>
          <button class="action-btn">ğŸ‘ï¸ Preview Post</button>
        </div>
      </div>
    </main>
  </div>

  <div class="content" *ngIf="activeTab === 'ai'">
    <div class="ai-sections">
      <!-- AI Content Generator -->
      <div class="ai-card">
        <h3>ğŸ§  AI Content Generator</h3>
        <form class="ai-form">
          <div class="form-group">
            <label>Product Name</label>
            <input type="text" [(ngModel)]="contentRequest.productName" name="productName" [ngModelOptions]="{standalone: true}" placeholder="Enter product/service name">
          </div>
          <div class="form-group">
            <label>Target Audience</label>
            <input type="text" [(ngModel)]="contentRequest.targetAudience" name="targetAudience" [ngModelOptions]="{standalone: true}" placeholder="e.g., Young professionals, 25-35">
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>Tone</label>
              <select [(ngModel)]="contentRequest.tone" name="tone" [ngModelOptions]="{standalone: true}">
                <option value="PROFESSIONAL">Professional</option>
                <option value="FRIENDLY">Friendly</option>
                <option value="FUNNY">Funny</option>
              </select>
            </div>
            <div class="form-group">
              <label>Goal</label>
              <select [(ngModel)]="contentRequest.goal" name="goal" [ngModelOptions]="{standalone: true}">
                <option value="SALES">Sales</option>
                <option value="AWARENESS">Awareness</option>
                <option value="ENGAGEMENT">Engagement</option>
              </select>
            </div>
            <div class="form-group">
              <label>Platform</label>
              <select [(ngModel)]="contentRequest.platform" name="platform" [ngModelOptions]="{standalone: true}">
                <option value="INSTAGRAM">Instagram</option>
                <option value="FACEBOOK">Facebook</option>
                <option value="LINKEDIN">LinkedIn</option>
                <option value="WHATSAPP">WhatsApp</option>
              </select>
            </div>
          </div>
          <button type="button" class="action-btn" (click)="generateAIContentForm()" [disabled]="loading">
            {{ loading ? 'â³ Generating...' : 'âœ¨ Generate Content' }}
          </button>
        </form>
        
        <div *ngIf="generatedContent" class="results" style="margin-top: 20px;">
          <div class="result-section" style="margin-bottom: 20px;">
            <h4>ğŸ“ Captions</h4>
            <div *ngFor="let caption of generatedContent.captions" style="padding: 10px; background: #f5f7fa; border-radius: 8px; margin-bottom: 10px;">
              <p>{{ caption }}</p>
              <button class="option-btn" (click)="useCaption(caption)">Use This</button>
            </div>
          </div>
          <div class="result-section" style="margin-bottom: 20px;">
            <h4>#ï¸âƒ£ Hashtags</h4>
            <div style="padding: 10px; background: #f5f7fa; border-radius: 8px;">
              <span *ngFor="let tag of generatedContent.hashtags" style="margin-right: 8px; color: #2563eb;">{{ tag }}</span>
            </div>
            <button class="option-btn" (click)="useHashtags(generatedContent.hashtags)" style="margin-top: 10px;">Use All</button>
          </div>
          <div class="result-section" *ngIf="generatedContent.postIdeas">
            <h4>ğŸ’¡ Post Ideas</h4>
            <ul style="padding-left: 20px;">
              <li *ngFor="let idea of generatedContent.postIdeas" style="margin-bottom: 8px;">{{ idea }}</li>
            </ul>
          </div>
          <div class="result-section" *ngIf="generatedContent.contentCalendar">
            <h4>ğŸ“… Content Calendar</h4>
            <div *ngFor="let item of generatedContent.contentCalendar" style="padding: 10px; background: #f5f7fa; border-radius: 8px; margin-bottom: 10px;">
              <strong>{{ item.day }} - {{ item.postType }}</strong>
              <p>{{ item.caption }}</p>
              <small>{{ item.hashtags }}</small>
            </div>
          </div>
        </div>
      </div>

      <!-- Creative Generator -->
      <div class="ai-card">
        <h3>ğŸ¨ Creative Generator</h3>
        <form class="ai-form">
          <div class="form-group">
            <label>Design Type</label>
            <select [(ngModel)]="creativeRequest.designType" name="designType" [ngModelOptions]="{standalone: true}">
              <option value="POSTER">Poster</option>
              <option value="CAROUSEL">Carousel</option>
              <option value="AD_BANNER">Ad Banner</option>
            </select>
          </div>
          <div class="form-group">
            <label>Product Name</label>
            <input type="text" [(ngModel)]="creativeRequest.productName" name="productName2" [ngModelOptions]="{standalone: true}" placeholder="Enter product name">
          </div>
          <div class="form-group">
            <label>Tagline</label>
            <input type="text" [(ngModel)]="creativeRequest.tagline" name="tagline" [ngModelOptions]="{standalone: true}" placeholder="Enter tagline">
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>Color Scheme</label>
              <input type="text" [(ngModel)]="creativeRequest.colorScheme" name="colorScheme" [ngModelOptions]="{standalone: true}" placeholder="e.g., Blue & White">
            </div>
            <div class="form-group">
              <label>Style</label>
              <select [(ngModel)]="creativeRequest.style" name="style" [ngModelOptions]="{standalone: true}">
                <option value="MODERN">Modern</option>
                <option value="MINIMAL">Minimal</option>
                <option value="VIBRANT">Vibrant</option>
                <option value="ELEGANT">Elegant</option>
              </select>
            </div>
          </div>
          <button type="button" class="action-btn" (click)="generateCreativeForm()" [disabled]="loading">
            {{ loading ? 'â³ Generating...' : 'ğŸ¨ Generate Creative' }}
          </button>
        </form>
      </div>

      <!-- Post Scheduler -->
      <div class="ai-card">
        <h3>ğŸ“… Post Scheduler</h3>
        <form class="ai-form">
          <div class="form-group">
            <label>Campaign</label>
            <select [(ngModel)]="scheduleRequest.campaignId" name="campaignId" [ngModelOptions]="{standalone: true}" (change)="loadScheduledPosts()">
              <option [ngValue]="null">Select Campaign</option>
              <option *ngFor="let campaign of campaigns" [ngValue]="campaign.id">{{ campaign.name }}</option>
            </select>
          </div>
          <div class="form-group">
            <label>Platform</label>
            <select [(ngModel)]="scheduleRequest.platform" name="platform2" [ngModelOptions]="{standalone: true}">
              <option value="INSTAGRAM">Instagram ğŸ“·</option>
              <option value="FACEBOOK">Facebook ğŸ‘¥</option>
              <option value="LINKEDIN">LinkedIn ğŸ’¼</option>
              <option value="WHATSAPP">WhatsApp ğŸ’¬</option>
            </select>
          </div>
          <div class="form-group">
            <label>Caption</label>
            <textarea rows="4" [(ngModel)]="scheduleRequest.caption" name="caption" [ngModelOptions]="{standalone: true}" placeholder="Enter caption"></textarea>
          </div>
          <div class="form-group">
            <label>Hashtags</label>
            <input type="text" [(ngModel)]="scheduleRequest.hashtags" name="hashtags" [ngModelOptions]="{standalone: true}" placeholder="#example #hashtags">
          </div>
          <div class="form-group">
            <label>Image URL</label>
            <input type="text" [(ngModel)]="scheduleRequest.imageUrl" name="imageUrl" [ngModelOptions]="{standalone: true}" placeholder="https://...">
          </div>
          <div class="form-group">
            <label>Schedule Date & Time</label>
            <input type="datetime-local" [(ngModel)]="scheduleRequest.scheduledTime" name="scheduledTime" [ngModelOptions]="{standalone: true}">
          </div>
          <button type="button" class="action-btn" (click)="schedulePost()" [disabled]="loading || !scheduleRequest.campaignId">
            {{ loading ? 'â³ Scheduling...' : 'ğŸ“… Schedule Post' }}
          </button>
        </form>
      </div>

      <!-- AI Image Generator -->
      <div class="ai-card">
        <h3>ğŸ–¼ï¸ AI Image Generator</h3>
        <div class="ai-options">
          <textarea 
            class="ai-input" 
            rows="3" 
            placeholder="Enter detailed image prompt (e.g., 'A modern coffee shop interior with warm lighting and cozy atmosphere')" 
            [(ngModel)]="imagePrompt"></textarea>
          <button class="action-btn" (click)="generateAIImage()" [disabled]="isGeneratingImage">
            {{ isGeneratingImage ? 'â³ Generating...' : 'âœ¨ Generate Image' }}
          </button>
          <div *ngIf="generatedImage" class="generated-image-container">
            <h4>Generated Image:</h4>
            <img [src]="generatedImage" [alt]="imagePrompt" class="generated-image" (error)="onImageError($event)" (load)="onImageLoad()">
            <p class="image-prompt">Prompt: "{{ imagePrompt }}"</p>
            <div class="image-actions">
              <button class="option-btn" (click)="downloadImage()">ğŸ’¾ Download</button>
              <button class="option-btn" (click)="saveToLibrary()">ğŸ“š Save to Library</button>
              <button class="option-btn" (click)="copyImageUrl()">ğŸ”— Copy URL</button>
            </div>
          </div>
        </div>
      </div>

      <!-- AI Insights -->
      <div class="ai-card">
        <h3>ğŸ’¡ AI Insights</h3>
        <div class="insights-list" *ngIf="aiInsights">
          <div class="insight-item">ğŸ“Š Best Performing: {{ aiInsights.bestContentType }}</div>
          <div class="insight-item">â° Best Time: {{ aiInsights.bestPostingTime }}</div>
          <div class="insight-item">ğŸ’¡ Suggested: {{ aiInsights.suggestedCampaigns?.join(', ') }}</div>
          <div class="insight-item">ğŸ”¥ Trending: {{ aiInsights.trendingTopics?.join(' ') }}</div>
        </div>
        <button class="action-btn">ğŸ”„ Refresh Insights</button>
      </div>
    </div>
  </div>

  <div class="content" *ngIf="activeTab === 'analytics'">
    <div class="analytics-sections">
      <div class="analytics-card">
        <h3>ğŸ“ˆ Engagement Analytics</h3>
        <div class="analytics-items">
          <div class="analytics-item">ğŸ“Š Reach Graph</div>
          <div class="analytics-item">â¤ï¸ Likes & Comments</div>
          <div class="analytics-item">ğŸ”— Click-Through Rate</div>
          <div class="analytics-item">ğŸ“ˆ Engagement Trend (Weekly)</div>
        </div>
      </div>

      <div class="analytics-card">
        <h3>âš–ï¸ Platform Comparison</h3>
        <div class="analytics-items">
          <div class="analytics-item">ğŸ“· Instagram vs Facebook</div>
          <div class="analytics-item">ğŸ“Š Content Type Performance</div>
          <div class="analytics-item">ğŸ‘¥ Audience Growth</div>
        </div>
      </div>

      <div class="analytics-card">
        <h3>ğŸ¯ Campaign Performance</h3>
        <div class="analytics-items">
          <div class="analytics-item">ğŸ“Š Active Campaign Metrics</div>
          <div class="analytics-item">ğŸ’° ROI Estimation</div>
          <div class="analytics-item">ğŸ¯ Conversion Rate</div>
        </div>
      </div>

      <div class="analytics-card">
        <h3>ğŸ“„ Reports</h3>
        <div class="report-actions">
          <button class="action-btn">ğŸ“¥ Download Monthly Report</button>
          <button class="action-btn">ğŸ“Š Export CSV</button>
          <button class="action-btn">ğŸ“¤ Share PDF</button>
        </div>
      </div>
    </div>
  </div>

  <div class="content" *ngIf="activeTab === 'settings'">
    <div class="tab-content">
      <h2>âš™ï¸ Settings</h2>
      <p>Configure your account and business settings</p>
    </div>
  </div>

  <div class="modal" *ngIf="showCreateCampaign" (click)="showCreateCampaign = false">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <h2>Create New Campaign</h2>
      <form (ngSubmit)="createCampaign()">
        <div class="form-group">
          <label>Campaign Name</label>
          <input type="text" [(ngModel)]="newCampaign.name" name="name" required>
        </div>
        <div class="form-group">
          <label>Start Date</label>
          <input type="date" [(ngModel)]="newCampaign.startDate" name="startDate" required>
        </div>
        <div class="form-group">
          <label>End Date</label>
          <input type="date" [(ngModel)]="newCampaign.endDate" name="endDate" required>
        </div>
        <div class="modal-actions">
          <button type="button" class="btn-secondary" (click)="showCreateCampaign = false">Cancel</button>
          <button type="submit" class="btn-primary">Create Campaign</button>
        </div>
      </form>
    </div>
  </div>
</div>
